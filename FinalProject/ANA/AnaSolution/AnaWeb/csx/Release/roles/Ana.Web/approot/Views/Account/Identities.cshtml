@model IEnumerable<Ana.Web.Models.UserIdentity>
@{
    ViewBag.Title = "Identities";
}

@*Needed for Visual Studio Intellisense*@
09
@if (false)
{
    <script src="/Scripts/jquery-1.5.1-vsdoc.js" type="text/javascript"></script>
}
 
<script type="text/javascript">
    function RemoveAssociation(element, id) {
        $.post('@Url.Action("RemoveAssociation")', { id: id }, function (data) {
            if (data) {
                $(element).parent().slideUp().Remove();
            }
            else {
                alert("There was an unexpected error. Try again later");
            }
        });
    }
</script>

<h2>Identities</h2>

<div id="ProviderList">
@foreach (var item in Model) {
  <div>
    @Ana.Web.Models.IdentityClaim.ProviderNiceName( item.IdentityProvider )  <button onclick="RemoveAssociation(this,@item.IdentityId)">Remove</button>
  </div>
}
</div>